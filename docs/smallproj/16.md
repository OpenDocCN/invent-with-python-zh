# #15 深穴

> 原文：<http://inventwithpython.com/bigbookpython/project15.html>

![](img/9d995d63aaead72cad01120081eb8f75.png)

这个节目是一个永远深入地下的深洞的动画。虽然很短，但这个程序利用了计算机屏幕的滚动特性，产生了一个有趣且无休止的可视化效果，证明了制作有趣的东西并不需要太多代码。这个项目类似于 58 项目“彩虹”

## 行动中的计划

当您运行 `deepcave.py` 时，输出如下:

```py
Deep Cave, by Al Sweigart email@protected
Press Ctrl-C to stop.
####################          ########################################
####################         #########################################
####################          ########################################
####################          ########################################
#####################          #######################################
######################          ######################################
#####################          #######################################
####################          ########################################
###################          #########################################
`--snip--`
```

## 它是如何工作的

这个程序利用了这样一个事实，即打印新行最终会导致前面的行在屏幕上上移。通过在每行上打印一个稍微不同的间隙，程序创建了一个滚动动画，看起来好像观众在向下移动。

左侧的 hashtag 字符数由`leftWidth`变量跟踪。中间的空格数由`gapWidth`变量跟踪。右侧标签字符的数量从`WIDTH - gapWidth - leftWidth`开始计算。这确保了每一行总是相同的宽度。

```py
"""Deep Cave, by Al Sweigart email@protected #  1
An animation of a deep cave that goes forever into the earth. #  2
This code is available at https://nostarch.com/big-book-small-python-programming #  3
Tags: tiny, beginner, scrolling, artistic""" #  4
 #  5
 #  6
import random, sys, time #  7
 #  8
# Set up the constants: #  9
WIDTH = 70  # (!) Try changing this to 10 or 30. # 10
PAUSE_AMOUNT = 0.05  # (!) Try changing this to 0 or 1.0. # 11
 # 12
print('Deep Cave, by Al Sweigart email@protected') # 13
print('Press Ctrl-C to stop.') # 14
time.sleep(2) # 15
 # 16
leftWidth = 20 # 17
gapWidth = 10 # 18
 # 19
while True: # 20
    # Display the tunnel segment: # 21
    rightWidth = WIDTH - gapWidth - leftWidth # 22
    print(('#' * leftWidth) + (' ' * gapWidth) + ('#' * rightWidth)) # 23
 # 24
    # Check for Ctrl-C press during the brief pause: # 25
    try: # 26
        time.sleep(PAUSE_AMOUNT) # 27
    except KeyboardInterrupt: # 28
        sys.exit()  # When Ctrl-C is pressed, end the program. # 29
 # 30
    # Adjust the left side width: # 31
    diceRoll = random.randint(1, 6) # 32
    if diceRoll == 1 and leftWidth > 1: # 33
        leftWidth = leftWidth - 1  # Decrease left side width. # 34
    elif diceRoll == 2 and leftWidth + gapWidth < WIDTH - 1: # 35
        leftWidth = leftWidth + 1  # Increase left side width. # 36
    else: # 37
        pass  # Do nothing; no change in left side width. # 38
 # 39
    # Adjust the gap width: # 40
    # (!) Try uncommenting out all of the following code: # 41
    #diceRoll = random.randint(1, 6) # 42
    #if diceRoll == 1 and gapWidth > 1: # 43
    #    gapWidth = gapWidth - 1  # Decrease gap width. # 44
    #elif diceRoll == 2 and leftWidth + gapWidth < WIDTH - 1: # 45
    #    gapWidth = gapWidth + 1  # Increase gap width. # 46
    #else: # 47
    #    pass  # Do nothing; no change in gap width.  # 48
```

在输入源代码并运行几次之后，尝试对其进行实验性的修改。标有`(!)`的评论对你可以做的小改变有建议。

## 探索计划

试着找出下列问题的答案。尝试对代码进行一些修改，然后重新运行程序，看看这些修改有什么影响。

1.  如果把第 23 行的`(' ' * gapWidth)`改成`('.' * gapWidth)`会怎么样？
2.  如果把第 32 行的`random.randint(1, 6)`改成`random.randint(1, 1)`会怎么样？
3.  如果把第 32 行的`random.randint(1, 6)`改成`random.randint(2, 2)`会怎么样？
4.  如果删除或注释掉第 17 行的`leftWidth = 20`,会得到什么错误信息？
5.  如果把第 10 行的`WIDTH = 70`改成`WIDTH = -70`会怎么样？
6.  如果将第 11 行的`PAUSE_AMOUNT = 0.05`改为`PAUSE_AMOUNT = -0.05`，会得到什么错误信息？