# 第一百吉饼

> 原文：<http://inventwithpython.com/bigbookpython/project1.html>

![](img/9d995d63aaead72cad01120081eb8f75.png)

在百吉饼这种演绎逻辑游戏中，你必须根据线索猜出一个秘密的三位数。该游戏提供以下提示之一来响应您的猜测:“Pico”，当您的猜测在错误的位置有正确的数字时，“Fermi”，当您的猜测在正确的位置有正确的数字时，以及“Bagels”，如果您的猜测没有正确的数字。你有 10 次机会猜这个秘密数字。

## 行动中的计划

当您运行 `bagels.py` 时，输出将如下所示:

```py
Bagels, a deductive logic game.
By Al Sweigart email@protected
I am thinking of a 3-digit number. Try to guess what it is.
Here are some clues:
When I say:    That means:
  Pico         One digit is correct but in the wrong position.
  Fermi        One digit is correct and in the right position.
  Bagels       No digit is correct.
I have thought up a number.
 You have 10 guesses to get it.
Guess #1:
> 123
Pico
Guess #2:
> 456
Bagels
Guess #3:
> 178
Pico Pico
`--snip--`
Guess #7:
> 791
Fermi Fermi
Guess #8:
> 701
You got it!
Do you want to play again? (yes or no)
> no
Thanks for playing!
```

## 它是如何工作的

请记住，这个程序使用的不是整数值，而是包含数字的字符串值。例如，`'426'`是与`426`不同的值。我们需要这样做，因为我们执行的是与秘密数字的字符串比较，而不是数学运算。记住`'0'`可以是前导数字:字符串`'026'`与`'26'`不同，但整数`026`与`26`相同。

```py
"""Bagels, by Al Sweigart email@protected #  1
A deductive logic game where you must guess a number based on clues. #  2
This code is available at https://nostarch.com/big-book-small-python-programming #  3
A version of this game is featured in the book, "Invent Your Own #  4
Computer Games with Python" https://nostarch.com/inventwithpython #  5
Tags: short, game, puzzle""" #  6
 #  7
import random #  8
 #  9
NUM_DIGITS = 3  # (!) Try setting this to 1 or 10. #  10
MAX_GUESSES = 10  # (!) Try setting this to 1 or 100. #  11
 #  12
 #  13
def main(): #  14
   print('''Bagels, a deductive logic game. #  15
By Al Sweigart email@protected #  16
 #  17
I am thinking of a {}-digit number with no repeated digits. #  18
Try to guess what it is. Here are some clues: #  19
When I say:    That means: #  20
 Pico         One digit is correct but in the wrong position. #  21
 Fermi        One digit is correct and in the right position. #  22
 Bagels       No digit is correct. #  23
 #  24
For example, if the secret number was 248 and your guess was 843, the #  25
clues would be Fermi Pico.'''.format(NUM_DIGITS)) #  26
 #  27
   while True:  # Main game loop. #  28
       # This stores the secret number the player needs to guess: #  29
       secretNum = getSecretNum() #  30
       print('I have thought up a number.') #  31
       print(' You have {} guesses to get it.'.format(MAX_GUESSES)) #  32
 #  33
       numGuesses = 1 #  34
       while numGuesses <= MAX_GUESSES: #  35
           guess = '' #  36
           # Keep looping until they enter a valid guess: #  37
           while len(guess) != NUM_DIGITS or not guess.isdecimal(): #  38
               print('Guess #{}: '.format(numGuesses)) #  39
               guess = input('> ') #  40
 #  41
           clues = getClues(guess, secretNum) #  42
           print(clues) #  43
           numGuesses += 1 #  44
 #  45
           if guess == secretNum: #  46
               break  # They're correct, so break out of this loop. #  47
           if numGuesses > MAX_GUESSES: #  48
               print('You ran out of guesses.') #  49
               print('The answer was {}.'.format(secretNum)) #  50
 #  51
       # Ask player if they want to play again. #  52
       print('Do you want to play again? (yes or no)') #  53
       if not input('> ').lower().startswith('y'): #  54
           break #  55
   print('Thanks for playing!') #  56
 #  57
 #  58
def getSecretNum(): #  59
   """Returns a string made up of NUM_DIGITS unique random digits.""" #  60
   numbers = list('0123456789')  # Create a list of digits 0 to 9. #  61
   random.shuffle(numbers)  # Shuffle them into random order. #  62
 #  63
   # Get the first NUM_DIGITS digits in the list for the secret number: #  64
   secretNum = '' #  65
   for i in range(NUM_DIGITS): #  66
       secretNum += str(numbers[i]) #  67
   return secretNum #  68
 #  69
 #  70
def getClues(guess, secretNum): #  71
   """Returns a string with the pico, fermi, bagels clues for a guess #  72
   and secret number pair.""" #  73
   if guess == secretNum: #  74
       return 'You got it!' #  75
 #  76
   clues = [] #  77
 #  78
   for i in range(len(guess)): #  79
       if guess[i] == secretNum[i]: #  80
           # A correct digit is in the correct place. #  81
           clues.append('Fermi') #  82
       elif guess[i] in secretNum: #  83
           # A correct digit is in the incorrect place. #  84
           clues.append('Pico') #  85
   if len(clues) == 0: #  86
       return 'Bagels'  # There are no correct digits at all. #  87
   else: #  88
       # Sort the clues into alphabetical order so their original order #  89
       # doesn't give information away. #  90
       clues.sort() #  91
       # Make a single string from the list of string clues. #  92
       return ' '.join(clues) #  93
 #  94
 #  95
# If the program is run (instead of imported), run the game: #  96
if __name__ == '__main__': #  97
   main()  #  98
```

在输入源代码并运行几次之后，尝试对其进行实验性的修改。标有`(!)`的评论对你可以做的小改变有建议。你也可以自己想办法做到以下几点:

*   通过改变`NUM_DIGITS`来改变密码的位数。
*   通过改变`MAX_GUESSES`来改变玩家获得的猜测次数。
*   尝试创建一个密码中包含字母和数字的版本。

## 探索计划

试着找出下列问题的答案。尝试对代码进行一些修改，然后重新运行程序，看看这些修改有什么影响。

1.  改变`NUM_DIGITS`常数会发生什么？
2.  改变`MAX_GUESSES`常数会发生什么？
3.  如果将`NUM_DIGITS`设置为大于`10`的数字会发生什么？
4.  如果把第 30 行的`secretNum = getSecretNum()`换成`secretNum = '123'`会怎么样？
5.  如果删除或注释掉第 34 行的`numGuesses = 1`,会得到什么错误信息？
6.  如果删除或注释掉第 62 行的`random.shuffle(numbers)`会发生什么？
7.  如果删除或注释掉第 74 行的`if` `guess == secretNum:`和第 75 行的`return 'You got it!'`会怎么样？
8.  如果在第 44 行注释掉`numGuesses += 1`会发生什么？