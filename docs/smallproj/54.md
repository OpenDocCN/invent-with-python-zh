# 53 号元素周期表

> 原文：<http://inventwithpython.com/bigbookpython/project53.html>

![](img/9d995d63aaead72cad01120081eb8f75.png)

元素周期表把所有已知的化学元素组织成一张表。这个程序显示这个表，并让玩家访问每个元素的附加信息，比如它的原子序数、符号、熔点等等。我从维基百科上收集了这些信息，并将其存储在一个名为 `periodictable.csv` 的文件中，你可以从`inventwithpython.com/periodictable.csv`下载这个文件。

## 行动中的计划

当您运行 `periodictable.py` 时，输出将如下所示:

```py
Periodic Table of Elements
By Al Sweigart email@protected

            Periodic Table of Elements
      1  2  3  4  5  6  7  8  9  10 11 12 13 14 15 16 17 18
    1 H                                                  He
    2 Li Be                               B  C  N  O  F  Ne
    3 Na Mg                               Al Si P  S  Cl Ar
    4 K  Ca Sc Ti V  Cr Mn Fe Co Ni Cu Zn Ga Ge As Se Br Kr
    5 Rb Sr Y  Zr Nb Mo Tc Ru Rh Pd Ag Cd In Sn Sb Te I  Xe
    6 Cs Ba La Hf Ta W  Re Os Ir Pt Au Hg Tl Pb Bi Po At Rn
    7 Fr Ra Ac Rf Db Sg Bh Hs Mt Ds Rg Cn Nh Fl Mc Lv Ts Og

            Ce Pr Nd Pm Sm Eu Gd Tb Dy Ho Er Tm Yb Lu
            Th Pa U  Np Pu Am Cm Bk Cf Es Fm Md No Lr
Enter a symbol or atomic number to examine, or QUIT to quit.
> 42
             Atomic Number: 42
                    Symbol: Mo
                   Element: Molybdenum
            Origin of name: Greek molýbdaina, 'piece of lead', from mólybdos, 'lead'
                     Group: 6
                    Period: 5
             Atomic weight: 95.95(1) u
                   Density: 10.22 g/cm^3
             Melting point: 2896 K
             Boiling point: 4912 K
    Specific heat capacity: 0.251 J/(g*K)
         Electronegativity: 2.16
Abundance in earth's crust: 1.2 mg/kg
Press Enter to continue...
`--snip--`
```

## 它是如何工作的

`csv`或*逗号分隔值*文件，是一个表示原始电子表格的文本文件。`csv`文件中的每一行是用逗号分隔的各列。例如， `periodictable.csv`中的前三行如下所示:

```py
1,H,Hydrogen,"Greek elements hydro- and -gen, meaning 'water-forming`--snip--`
2,He,Helium,"Greek hḗlios, 'sun'",18,1,4.002602(2)[III][V],0.0001785`--snip--`
3,Li,Lithium,"Greek líthos, 'stone'",1,2,6.94[III][IV][V][VIII][VI],`--snip--`
```

Python 的`csv`模块使得从`csv`文件导入数据变得容易。中的字符串列表，就像第 15 到 18 行一样。第 32 行到第 58 行把这个列表变成了一个字典，这样程序的其他部分就可以很容易地通过元素名或原子序数来调用信息。

```py
"""Periodic Table of Elements, by Al Sweigart email@protected #  1
Displays atomic information for all the elements. #  2
This code is available at https://nostarch.com/big-book-small-python-programming #  3
Tags: short, science""" #  4
 #  5
# Data from https://en.wikipedia.org/wiki/List_of_chemical_elements #  6
# Highlight the table, copy it, then paste it into a spreadsheet program #  7
# like Excel or Google Sheets like in https://invpy.com/elements #  8
# Then save this file as periodictable.csv. #  9
# Or download this csv file from https://invpy.com/periodictable.csv # 10
 # 11
import csv, sys, re # 12
 # 13
# Read in all the data from periodictable.csv. # 14
elementsFile = open('periodictable.csv', encoding='utf-8') # 15
elementsCsvReader = csv.reader(elementsFile) # 16
elements = list(elementsCsvReader) # 17
elementsFile.close() # 18
 # 19
ALL_COLUMNS = ['Atomic Number', 'Symbol', 'Element', 'Origin of name', # 20
               'Group', 'Period', 'Atomic weight', 'Density', # 21
               'Melting point', 'Boiling point', # 22
               'Specific heat capacity', 'Electronegativity', # 23
               'Abundance in earth\'s crust'] # 24
 # 25
# To justify the text, we need to find the longest string in ALL_COLUMNS. # 26
LONGEST_COLUMN = 0 # 27
for key in ALL_COLUMNS: # 28
    if len(key) > LONGEST_COLUMN: # 29
        LONGEST_COLUMN = len(key) # 30
 # 31
# Put all the elements data into a data structure: # 32
ELEMENTS = {}  # The data structure that stores all the element data. # 33
for line in elements: # 34
    element = {'Atomic Number':  line[0], # 35
               'Symbol':         line[1], # 36
               'Element':        line[2], # 37
               'Origin of name': line[3], # 38
               'Group':          line[4], # 39
               'Period':         line[5], # 40
               'Atomic weight':  line[6] + ' u', # atomic mass unit # 41
               'Density':        line[7] + ' g/cm^3', # grams/cubic cm # 42
               'Melting point':  line[8] + ' K', # kelvin # 43
               'Boiling point':  line[9] + ' K', # kelvin # 44
               'Specific heat capacity':      line[10] + ' J/(g*K)', # 45
               'Electronegativity':           line[11], # 46
               'Abundance in earth\'s crust': line[12] + ' mg/kg'} # 47
 # 48
    # Some of the data has bracketed text from Wikipedia that we want to # 49
    # remove, such as the atomic weight of Boron: # 50
    # "10.81[III][IV][V][VI]" should be "10.81" # 51
 # 52
    for key, value in element.items(): # 53
        # Remove the [roman numeral] text: # 54
        element[key] = re.sub(r'\[(I|V|X)+\]', '', value) # 55
 # 56
    ELEMENTS[line[0]] = element  # Map the atomic number to the element. # 57
    ELEMENTS[line[1]] = element  # Map the symbol to the element. # 58
 # 59
print('Periodic Table of Elements') # 60
print('By Al Sweigart email@protected') # 61
print() # 62
 # 63
while True:  # Main program loop. # 64
    # Show table and let the user select an element: # 65
    print('''            Periodic Table of Elements # 66
      1  2  3  4  5  6  7  8  9  10 11 12 13 14 15 16 17 18 # 67
    1 H                                                  He # 68
    2 Li Be                               B  C  N  O  F  Ne # 69
    3 Na Mg                               Al Si P  S  Cl Ar # 70
    4 K  Ca Sc Ti V  Cr Mn Fe Co Ni Cu Zn Ga Ge As Se Br Kr # 71
    5 Rb Sr Y  Zr Nb Mo Tc Ru Rh Pd Ag Cd In Sn Sb Te I  Xe # 72
    6 Cs Ba La Hf Ta W  Re Os Ir Pt Au Hg Tl Pb Bi Po At Rn # 73
    7 Fr Ra Ac Rf Db Sg Bh Hs Mt Ds Rg Cn Nh Fl Mc Lv Ts Og # 74
 # 75
            Ce Pr Nd Pm Sm Eu Gd Tb Dy Ho Er Tm Yb Lu # 76
            Th Pa U  Np Pu Am Cm Bk Cf Es Fm Md No Lr''') # 77
    print('Enter a symbol or atomic number to examine, or QUIT to quit.') # 78
    response = input('> ').title() # 79
 # 80
    if response == 'Quit': # 81
        sys.exit() # 82
 # 83
    # Display the selected element's data: # 84
    if response in ELEMENTS: # 85
        for key in ALL_COLUMNS: # 86
            keyJustified = key.rjust(LONGEST_COLUMN) # 87
            print(keyJustified + ': ' + ELEMENTS[response][key]) # 88
        input('Press Enter to continue...')  # 89
```

## 探索计划

试着找出下列问题的答案。尝试对代码进行一些修改，然后重新运行程序，看看这些修改有什么影响。

1.  如果把 81 行的`response == 'Quit'`改成`response == 'quit'`会导致什么 bug？
2.  如果删除或注释掉第 53 行和第 55 行会发生什么？