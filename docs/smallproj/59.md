# #58 彩虹

> 原文：<http://inventwithpython.com/bigbookpython/project58.html>

![](img/9d995d63aaead72cad01120081eb8f75.png)

彩虹是一个简单的程序，显示了一个彩色的彩虹在屏幕上来回移动。该程序利用了这样一个事实，即当新的文本行出现时，现有的文本会向上滚动，使其看起来像是在移动。这个项目对初学者来说很好，它类似于项目 15“深穴”

## 行动中的计划

图 58-1 显示了运行 `rainbow.py` 时的输出。

![f58001](img/5534b93bd48019d3738c15d1fce48063.png)

:彩虹的锯齿形输出，在屏幕上是彩色的

## 它是如何工作的

这个程序连续打印相同的彩虹图案。改变的是打印在它左边的空格字符的数量。增加这个数字会使彩虹向右移动，减少这个数字会使彩虹向左移动。`indent`变量跟踪空格的数量。将`indentIncreasing`变量设置为`True`表示`indent`应该增加，直到到达`60`，此时变为`False`。代码的其余部分减少了空格的数量。一旦到达`0`，它又变回`True`，重复彩虹的之字形。

```py
"""Rainbow, by Al Sweigart email@protected #  1
Shows a simple rainbow animation. Press Ctrl-C to stop. #  2
This code is available at https://nostarch.com/big-book-small-python-programming #  3
Tags: tiny, artistic, bext, beginner, scrolling""" #  4
 #  5
import time, sys #  6
 #  7
try: #  8
   import bext #  9
except ImportError: # 10
    print('This program requires the bext module, which you') # 11
    print('can install by following the instructions at') # 12
    print('https://pypi.org/project/Bext/') # 13
    sys.exit() # 14
 # 15
print('Rainbow, by Al Sweigart email@protected') # 16
print('Press Ctrl-C to stop.') # 17
time.sleep(3) # 18
 # 19
indent = 0  # How many spaces to indent. # 20
indentIncreasing = True  # Whether the indentation is increasing or not. # 21
 # 22
try: # 23
    while True:  # Main program loop. # 24
        print(' ' * indent, end='') # 25
        bext.fg('red') # 26
        print('##', end='') # 27
        bext.fg('yellow') # 28
        print('##', end='') # 29
        bext.fg('green') # 30
        print('##', end='') # 31
        bext.fg('blue') # 32
        print('##', end='') # 33
        bext.fg('cyan') # 34
        print('##', end='') # 35
        bext.fg('purple') # 36
        print('##') # 37
 # 38
        if indentIncreasing: # 39
            # Increase the number of spaces: # 40
            indent = indent + 1 # 41
            if indent == 60:  # (!) Change this to 10 or 30. # 42
                # Change direction: # 43
                indentIncreasing = False # 44
        else: # 45
            # Decrease the number of spaces: # 46
            indent = indent - 1 # 47
            if indent == 0: # 48
                # Change direction: # 49
                indentIncreasing = True # 50
 # 51
        time.sleep(0.02)  # Add a slight pause. # 52
except KeyboardInterrupt: # 53
    sys.exit()  # When Ctrl-C is pressed, end the program.  # 54
```

## 探索计划

试着找出下列问题的答案。尝试对代码进行一些修改，然后重新运行程序，看看这些修改有什么影响。

1.  如果把第 44 行的`False`改成`True`会怎么样？
2.  如果将所有`bext.fg()`调用的参数都改为`'random'`，会发生什么？