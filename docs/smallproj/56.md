# #55 强力球彩票

> 原文：<http://inventwithpython.com/bigbookpython/project55.html>

![](img/9d995d63aaead72cad01120081eb8f75.png)

强力球彩票是一种令人兴奋的小额输钱方式。如果你购买一张 2 美元的彩票，你可以选择六个号码:从 1 到 69 中抽取五个，从 1 到 26 中抽取第六个“强力球”号码。数字的顺序并不重要。如果彩票选择了你的六个号码，你将赢得 15.86 亿美元！除了你不会赢，因为你的赔率是 292201338 分之一。但是如果你花 200 美元买了 100 张票，你的胜算是。。。2922013 分之一。你也不会赢，但至少你会损失 100 倍的钱。越喜欢输钱，彩票越好玩！

为了帮助你想象你中不了彩票的几率，这个程序模拟了多达一百万个强力球抽奖，然后将它们与你挑选的数字进行比较。现在你可以不用花钱就能享受彩票中奖的所有刺激。

有趣的事实:每一组六个数字都和其他数字一样有可能赢。所以下次你想买彩票的时候，选 1、2、3、4、5 和 6。这些数字很可能会以更复杂的形式出现。

## 行动中的计划

当您运行`powerballottery.py`时，输出将如下所示:

```py
Powerball Lottery, by Al Sweigart email@protected

Each powerball lottery ticket costs $2\. The jackpot for this game
is $1.586 billion! It doesn't matter what the jackpot is, though,
because the odds are 1 in 292,201,338, so you won't win.

This simulation gives you the thrill of playing without wasting money.

Enter 5 different numbers from 1 to 69, with spaces between
each number. (For example: 5 17 23 42 50 51)
> 1 2 3 4 5
Enter the powerball number from 1 to 26.
> 6
How many times do you want to play? (Max: 1000000)
> 1000000
It costs $2000000 to play 1000000 times, but don't
worry. I'm sure you'll win it all back.
Press Enter to start...
The winning numbers are: 12 29 48 11 4 and 13  You lost.
The winning numbers are: 54 39 3 42 16 and 12  You lost.
The winning numbers are: 56 4 63 23 38 and 24  You lost.
`--snip--`
The winning numbers are: 46 29 10 62 17 and 21 You lost.
The winning numbers are: 5 20 18 65 30 and 10  You lost.
The winning numbers are: 54 30 58 10 1 and 18  You lost.
You have wasted $2000000
Thanks for playing!
```

## 它是如何工作的

这个程序的输出看起来相当一致，因为第 109 行的`allWinningNums.ljust(21)`代码用足够的空间填充数字，占据 21 列，不管中奖数字有多少位。这使得“你输了。”文本总是出现在屏幕的同一个地方，所以即使程序快速输出几行，它仍然是可读的。

```py
"""Powerball Lottery, by Al Sweigart email@protected #  1
A simulation of the lottery so you can experience the thrill of #  2
losing the lottery without wasting your money. #  3
This code is available at https://nostarch.com/big-book-small-python-programming #  4
Tags: short, humor, simulation""" #  5
 #  6
import random #  7
 #  8
print('''Powerball Lottery, by Al Sweigart email@protected #  9
 #  10
Each powerball lottery ticket costs $2\. The jackpot for this game #  11
is $1.586 billion! It doesn't matter what the jackpot is, though, #  12
because the odds are 1 in 292,201,338, so you won't win. #  13
 #  14
This simulation gives you the thrill of playing without wasting money. #  15
''') #  16
 #  17
# Let the player enter the first five numbers, 1 to 69: #  18
while True: #  19
   print('Enter 5 different numbers from 1 to 69, with spaces between') #  20
   print('each number. (For example: 5 17 23 42 50)') #  21
   response = input('> ') #  22
 #  23
   # Check that the player entered 5 things: #  24
   numbers = response.split() #  25
   if len(numbers) != 5: #  26
       print('Please enter 5 numbers, separated by spaces.') #  27
       continue #  28
 #  29
   # Convert the strings into integers: #  30
   try: #  31
       for i in range(5): #  32
           numbers[i] = int(numbers[i]) #  33
   except ValueError: #  34
       print('Please enter numbers, like 27, 35, or 62.') #  35
       continue #  36
 #  37
   # Check that the numbers are between 1 and 69: #  38
   for i in range(5): #  39
       if not (1 <= numbers[i] <= 69): #  40
           print('The numbers must all be between 1 and 69.') #  41
           continue #  42
 #  43
   # Check that the numbers are unique: #  44
   # (Create a set from number to remove duplicates.) #  45
   if len(set(numbers)) != 5: #  46
       print('You must enter 5 different numbers.') #  47
       continue #  48
 #  49
   break #  50
 #  51
# Let the player select the powerball, 1 to 26: #  52
while True: #  53
   print('Enter the powerball number from 1 to 26.') #  54
   response = input('> ') #  55
 #  56
   # Convert the strings into integers: #  57
   try: #  58
       powerball = int(response) #  59
   except ValueError: #  60
       print('Please enter a number, like 3, 15, or 22.') #  61
       continue #  62
 #  63
   # Check that the number is between 1 and 26: #  64
   if not (1 <= powerball <= 26): #  65
       print('The powerball number must be between 1 and 26.') #  66
       continue #  67
 #  68
   break #  69
 #  70
# Enter the number of times you want to play: #  71
while True: #  72
   print('How many times do you want to play? (Max: 1000000)') #  73
   response = input('> ') #  74
 #  75
   # Convert the strings into integers: #  76
   try: #  77
       numPlays = int(response) #  78
   except ValueError: #  79
       print('Please enter a number, like 3, 15, or 22000.') #  80
       continue #  81
 #  82
   # Check that the number is between 1 and 1000000: #  83
   if not (1 <= numPlays <= 1000000): #  84
       print('You can play between 1 and 1000000 times.') #  85
       continue #  86
 #  87
   break #  88
 #  89
# Run the simulation: #  90
price = '$' + str(2 * numPlays) #  91
print('It costs', price, 'to play', numPlays, 'times, but don\'t') #  92
print('worry. I\'m sure you\'ll win it all back.') #  93
input('Press Enter to start...') #  94
 #  95
possibleNumbers = list(range(1, 70)) #  96
for i in range(numPlays): #  97
   # Come up with lottery numbers: #  98
   random.shuffle(possibleNumbers) #  99
    winningNumbers = possibleNumbers[0:5] # 100
    winningPowerball = random.randint(1, 26) # 101
 # 102
    # Display winning numbers: # 103
    print('The winning numbers are: ', end='') # 104
    allWinningNums = '' # 105
    for i in range(5): # 106
        allWinningNums += str(winningNumbers[i]) + ' ' # 107
    allWinningNums += 'and ' + str(winningPowerball) # 108
    print(allWinningNums.ljust(21), end='') # 109
 # 110
    # NOTE: Sets are not ordered, so it doesn't matter what order the # 111
    # integers in set(numbers) and set(winningNumbers) are. # 112
    if (set(numbers) == set(winningNumbers) # 113
        and powerball == winningPowerball): # 114
            print() # 115
            print('You have won the Powerball Lottery! Congratulations,') # 116
            print('you would be a billionaire if this was real!') # 117
            break # 118
    else: # 119
        print(' You lost.')  # The leading space is required here. # 120
 # 121
print('You have wasted', price) # 122
print('Thanks for playing!')  # 123
```

## 探索计划

试着找出下列问题的答案。尝试对代码进行一些修改，然后重新运行程序，看看这些修改有什么影响。

1.  如果把 100 行的`possibleNumbers[0:5]`改成`numbers`，101 行的`random.randint(1, 26)`改成`powerball`，会发生什么？
2.  如果删除或注释掉第 96 行的`possibleNumbers = list(range(1, 70))`，会得到什么错误？